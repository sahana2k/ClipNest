/* sidepanel/sidepanel.css */
:root{
  --bg: #f6f8fb;
  --surface: #ffffff;
  --muted: #667085;
  --text: #0f1724;
  --accent: #2563eb; /* indigo-600 */
  --accent-2: #06b6d4; /* teal */
  --danger: #ef4444;
  --glass: rgba(15,23,36,0.04);
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
/* Dark theme overrides */
[data-theme="dark"]{
  --bg: #071228;
  --surface: #0b1624;
  --muted: #9aa4b2;
  --text: #e6eef8;
  --accent: #60a5fa;
  --accent-2: #34d399;
  --danger: #f97316;
  --glass: rgba(255,255,255,0.03);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--text)}
/* constrain the visible content to a regular sidebar width */
#app{max-width:1000px;margin:8px auto;padding:6px;}

/* layout: left nav + main area */
#layout{display:flex;gap:12px}
#sideNav{width:68px;background:var(--surface);border-radius:12px;padding:10px;display:flex;flex-direction:column;align-items:center;gap:8px;height:calc(100vh - 24px);box-shadow:0 6px 18px rgba(2,6,23,0.04)}
/* When sideNav is used as top bar (narrow screens or header layout), style .navBtn for horizontal layout */
@media (min-width:720px){
  /* no-op for sidebar */
}
@media (max-width:720px){
  /* show nav buttons horizontally in compressed layouts */
  #sideNav.horizontal{flex-direction:row;width:100%;height:auto;padding:8px}
  #sideNav.horizontal .navBtn{margin:0 6px;padding:8px 14px;background:var(--surface);box-shadow:0 6px 16px rgba(2,6,23,0.04)}
}
.brand{width:38px;height:38px;border-radius:8px;background:var(--accent);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700}
.navBtn{width:100%;background:transparent;border:none;padding:8px;border-radius:10px;cursor:pointer;color:var(--text);font-weight:600}
.navBtn:hover{background:var(--glass)}

/* If nav buttons are used as top-floating tabs (in header bar), ensure they have visible background */
.menuDropdown .menuItem button, .navBtn { background: transparent; color: var(--text); }
.menuDropdown .menuItem button{padding:8px 12px;border-radius:8px;display:block}
.menuDropdown .menuItem button:hover{background:var(--glass)}
.navFooter{margin-top:auto}
.navFloating{background:var(--accent);color:#fff;border:none;padding:8px;border-radius:10px;cursor:pointer}

header{
  display:flex;gap:10px;align-items:center;padding:12px 14px;border-bottom:1px solid rgba(15,23,36,0.06);
  background:transparent; /* keep header subtle and controls visible in light mode */
}
/* allow dropdowns to escape header bounds */
header { overflow: visible; }
.menu { overflow: visible; }
/* ensure select and labels are readable in light mode */
/* Strong header control styles for clear visibility in light mode */
header select, header label, header button { color: var(--text) !important; }
header { color: var(--text) }
header select { background: var(--surface) !important; border: 1px solid rgba(15,23,36,0.08) !important; color: var(--text) !important; }
header select option { color: var(--text) }
header label { color: var(--text) !important; }
header input { color: var(--text) !important; }
header input[type="checkbox"] { accent-color: var(--accent); }
/* make the header menu button visible with subtle background */
header .menu button#menuBtn{background:var(--surface);color:var(--text);border-radius:8px;padding:6px 8px;border:1px solid rgba(15,23,36,0.06);box-shadow:0 6px 14px rgba(2,6,23,0.04)}
header .menu button#menuBtn:hover{background:rgba(0,0,0,0.03)}
/* Stronger, high-specificity rules to ensure nav/menu labels are visible in all themes */
header .navBtn,
header .menu button,
header .menuDropdown .menuItem button,
#sideNav .navBtn {
  color: var(--text) !important;
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

/* Dropdown menu items should sit on a visible surface and use theme text color */
.menuDropdown .menuItem button{
  color: var(--text) !important;
  background: var(--surface) !important;
  border: 1px solid rgba(15,23,36,0.06) !important;
  border-radius:8px !important;
  padding:8px 10px !important;
  text-align:left;
}

/* When the sidebar is used as a top horizontal nav, make tab buttons clearly visible */
#sideNav.horizontal .navBtn{margin:0 6px;padding:8px 12px;background:var(--surface) !important;color:var(--text) !important;box-shadow:0 6px 16px rgba(2,6,23,0.04) !important}
/* menu dropdown */
.menu{margin-left:auto;position:relative}
.menu button#menuBtn{background:transparent;border:none;padding:8px 10px;border-radius:8px;font-size:16px;cursor:pointer}
.menuDropdown{position:absolute;right:0;top:42px;background:var(--surface);border-radius:10px;box-shadow:0 10px 30px rgba(2,6,23,0.14);padding:8px;min-width:220px}
.menuDropdown{z-index:9999;pointer-events:auto}
.menuDropdown .menuItem{padding:6px}
.menuDropdown .menuItem button{width:100%;text-align:left}
.menuDropdown input{width:100%}
.menuDropdown.hidden{display:none}
h1{font-size:18px;margin:0;color:var(--text);font-weight:600}
select,input,button{font:13px/1.2 var(--font-family, Inter, system-ui)}
input,select{padding:8px 10px;border-radius:8px;border:1px solid rgba(15,23,36,0.08);background:linear-gradient(180deg,#fff,#fbfdff);color:var(--text)}
input,select{background:linear-gradient(180deg,#fff,#fbfdff)}
/* dark adjustments for inputs */
[data-theme="dark"] input,[data-theme="dark"] select{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04)}
button{background:var(--accent);color:#fff;border:none;padding:8px 12px;border-radius:10px;cursor:pointer;box-shadow:0 6px 12px rgba(37,99,235,0.08);transition:transform .08s ease,box-shadow .12s ease}
button:hover{transform:translateY(-1px);box-shadow:0 10px 20px rgba(37,99,235,0.12)}
button.secondary{background:transparent;color:var(--accent);border:1px solid rgba(37,99,235,0.12);box-shadow:none}

#explainView{padding:12px;display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:start;background:var(--surface);margin:10px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
#explainView img{width:260px;height:auto;border-radius:10px;border:1px solid rgba(15,23,36,0.04);object-fit:cover}
#notes{white-space:pre-wrap;font-size:14px;color:var(--muted);margin-top:6px}
#qa{margin-top:10px}
#qa .q{margin:8px 0;font-weight:600;color:var(--text)}
.hidden{display:none}

#dueList .cardItem{background:var(--surface);border-radius:12px;padding:10px;margin:10px 0;display:flex;gap:10px;align-items:flex-start;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
#dueList .cardItem img{width:100px;height:64px;border-radius:8px;object-fit:cover}
#dueList .cardItem .content{flex:1}
#dueList .cardItem h3{margin:0;font-size:14px}
#dueList .cardItem p{margin:6px 0 0;color:var(--muted);font-size:13px}

.cardItem .meta{display:flex;gap:8px;align-items:center;margin-top:8px}
.chip{background:var(--glass);padding:6px 8px;border-radius:999px;font-size:12px;color:var(--muted)}

.actions{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:8px}
.muted{color:var(--muted);font-size:12px}
button[disabled]{opacity:0.6;cursor:not-allowed}

/* Manage list */
#manageList .cardItem{flex-direction:column}

/* Manage (Clips) list cards */
#manageList .cardItem{display:flex;gap:10px;padding:12px;border-radius:10px;background:var(--surface);margin:8px 0}
#manageList .cardItem img{width:200px;height:120px;border-radius:8px;object-fit:cover}
#dueList .cardItem img{width:200px;height:120px;border-radius:8px;object-fit:cover}

/* Remove gradient overlay in dark theme for cards */
[data-theme="dark"] #dueList .cardItem, [data-theme="dark"] #manageList .cardItem {
  background: var(--surface); /* plain background in dark mode */
}

.choices{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.choices button{padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:rgba(255,255,255,0.03);cursor:pointer;text-align:left}
.choices button:hover{background:rgba(0,0,0,0.06)}
#manageList .cardItem .meta{margin-top:6px}

/* small responsive tweaks */
@media (max-width:720px){
  #layout{flex-direction:column}
  #sideNav{width:100%;height:auto;flex-direction:row;padding:8px}
  #app{max-width:420px}
}

/* Quiz UI */
#quizView{padding:12px;background:var(--surface);margin:10px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
#quizArea{display:flex;flex-direction:column;gap:10px}
#quizCard img{width:220px;border-radius:10px}
#quizQuestion{font-weight:700;color:var(--text)}
#quizAnswer{padding:8px;border-radius:8px;border:1px solid rgba(15,23,36,0.06)}
#quizArea .actions{margin-top:6px}

/* Retry button */
#retryButton {
  background-color: var(--surface);
  border: 1px solid var(--danger);
  color: var(--danger);
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
}
#retryButton:hover {
  background-color: var(--danger);
  color: var(--surface);
}
.error-wrap {
  display: inline-flex;
  align-items: center;
}

/* small responsive tweaks */
@media (max-width:420px){
  #explainView{grid-template-columns:1fr}
  #dueList .cardItem img{display:none}
}
